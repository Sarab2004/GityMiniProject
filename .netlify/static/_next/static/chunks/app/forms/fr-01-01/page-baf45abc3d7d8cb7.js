(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[84],{20:function(e,t,s){Promise.resolve().then(s.bind(s,9890))},9890:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var a=s(7437),r=s(2265),l=s(3130),n=s(1919),o=s(3027),i=s(2015),c=s(7061);let d=e=>{let{label:t,options:s,required:r=!1,value:l=[],onChange:n,helper:o,className:i=""}=e,c=(e,t)=>{t?null==n||n([...l,e]):null==n||n(l.filter(t=>t!==e))};return(0,a.jsxs)("div",{className:"space-y-3 ".concat(i),children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-text",children:[t,r&&(0,a.jsx)("span",{className:"text-danger mr-1",children:"*"})]}),(0,a.jsx)("div",{className:"space-y-2",children:s.map(e=>(0,a.jsxs)("label",{className:"flex items-center space-x-3 space-x-reverse cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:l.includes(e.value),onChange:t=>c(e.value,t.target.checked),className:"h-4 w-4 text-accent border-border rounded focus:ring-focus"}),(0,a.jsx)("span",{className:"text-sm text-text",children:e.label})]},e.value))}),o&&(0,a.jsx)("p",{className:"text-xs text-muted",children:o})]})};var u=s(5753),p=s(3544);function x(){let[e,t]=(0,r.useState)({requesterName:"",requesterUnit:"",actionNumber:"",date:"",requestType:"",actionSource:[],nonConformityDescription:"",rootCauseObjective:"",riskAssessmentUpdate:"",riskAssessmentDate:"",newKnowledgeExperience:"",requiredActions:[],responsibleApproval:"",managerApproval:"",affectedDocuments:[],firstReportStatus:"",firstReportDate:"",firstReportDescription:"",firstReportResponsibleSignature:"",firstReportApproverSignature:"",secondReportStatus:"",secondReportDate:"",secondReportDescription:"",secondReportResponsibleSignature:"",secondReportApproverSignature:"",effectivenessDate:"",effectivenessMethod:"",effectivenessStatus:"",newActionNumber:"",effectivenessReviewer:"",effectivenessSignature:""}),s=[{value:"approved",label:"مورد تأیید هستند"},{value:"not_approved",label:"مورد تأیید نیستند"}],x=(e,s)=>{t(t=>({...t,[e]:s}))};return(0,a.jsxs)(l.l,{title:"اقدام اصلاحی/پیشگیرانه/تغییرات",code:"FR-01-01-00",onReset:()=>{t({requesterName:"",requesterUnit:"",actionNumber:"",date:"",requestType:"",actionSource:[],nonConformityDescription:"",rootCauseObjective:"",riskAssessmentUpdate:"",riskAssessmentDate:"",newKnowledgeExperience:"",requiredActions:[],responsibleApproval:"",managerApproval:"",affectedDocuments:[],firstReportStatus:"",firstReportDate:"",firstReportDescription:"",firstReportResponsibleSignature:"",firstReportApproverSignature:"",secondReportStatus:"",secondReportDate:"",secondReportDescription:"",secondReportResponsibleSignature:"",secondReportApproverSignature:"",effectivenessDate:"",effectivenessMethod:"",effectivenessStatus:"",newActionNumber:"",effectivenessReviewer:"",effectivenessSignature:""})},children:[(0,a.jsx)(n.h,{title:"اطلاعات کلی",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(o.o,{label:"نام درخواست‌کننده",placeholder:"مثال: علی رضایی",required:!0,value:e.requesterName,onChange:e=>x("requesterName",e)}),(0,a.jsx)(o.o,{label:"واحد درخواست‌کننده",placeholder:"مثال: تولید/برش",required:!0,value:e.requesterUnit,onChange:e=>x("requesterUnit",e)}),(0,a.jsx)(o.o,{label:"شماره اقدام",placeholder:"مثال: NP-03-001",required:!0,value:e.actionNumber,onChange:e=>x("actionNumber",e)}),(0,a.jsx)(i.W,{label:"تاریخ",required:!0,value:e.date,onChange:e=>x("date",e)})]})}),(0,a.jsx)(n.h,{title:"نوع درخواست",children:(0,a.jsx)(c.E,{label:"نوع درخواست",options:[{value:"corrective",label:"اقدام اصلاحی"},{value:"preventive",label:"اقدام پیشگیرانه"},{value:"change",label:"تغییرات"},{value:"improvement",label:"پیشنهاد بهبود"}],required:!0,value:e.requestType,onChange:e=>x("requestType",e)})}),(0,a.jsx)(n.h,{title:"منشأ اقدام",children:(0,a.jsx)(d,{label:"منشأ اقدام",options:[{value:"audit",label:"ممیزی"},{value:"compliance",label:"انطباق با قوانین"},{value:"process_risks",label:"ریسک‌ها و فرصت‌های فرآیندی"},{value:"incidents",label:"حوادث"},{value:"near_misses",label:"شبه‌حوادث"},{value:"unsafe_conditions",label:"شرایط ناایمن"},{value:"unsafe_acts",label:"اعمال ناایمن"},{value:"checklist",label:"چک‌لیست"},{value:"safety_risks",label:"ریسک‌های ایمنی/بهداشتی/اموال"},{value:"environmental",label:"جنبه‌های زیست‌محیطی"},{value:"management_review",label:"بازنگری مدیریت"},{value:"other",label:"سایر"}],required:!0,value:e.actionSource,onChange:e=>x("actionSource",e)})}),(0,a.jsx)(n.h,{title:"شرح عدم‌انطباق/درخواست تغییر",children:(0,a.jsx)(u.g,{label:"شرح عدم‌انطباق/درخواست تغییر",placeholder:"چه مشکلی دیدید/چه تغییری می‌خواهید؟",required:!0,value:e.nonConformityDescription,onChange:e=>x("nonConformityDescription",e)})}),(0,a.jsx)(n.h,{title:"ریشه‌یابی/هدف تغییر",children:(0,a.jsx)(u.g,{label:"ریشه‌یابی/هدف تغییر",placeholder:"علت اصلی یا هدف دقیق چیست؟",required:!0,value:e.rootCauseObjective,onChange:e=>x("rootCauseObjective",e)})}),(0,a.jsx)(n.h,{title:"بروزرسانی ارزیابی ریسک/جنبه",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(c.E,{label:"نیاز به به‌روزرسانی ارزیابی ریسک/جنبه",options:[{value:"has",label:"دارد"},{value:"not",label:"ندارد"}],required:!0,value:e.riskAssessmentUpdate,onChange:e=>x("riskAssessmentUpdate",e)}),"has"===e.riskAssessmentUpdate&&(0,a.jsx)(i.W,{label:"تاریخ بروزرسانی",required:!0,value:e.riskAssessmentDate,onChange:e=>x("riskAssessmentDate",e)})]})}),(0,a.jsx)(n.h,{title:"ایجاد دانش یا تجربه جدید",children:(0,a.jsx)(c.E,{label:"ایجاد دانش یا تجربه جدید؟",options:[{value:"yes",label:"بله"},{value:"no",label:"خیر"}],required:!0,value:e.newKnowledgeExperience,onChange:e=>x("newKnowledgeExperience",e)})}),(0,a.jsx)(n.h,{title:"اقدامات و منابع موردنیاز",children:(0,a.jsx)(p.$,{label:"اقدامات و منابع موردنیاز",columns:[{key:"action",label:"شرح اقدام",type:"text",placeholder:"مثال: نصب گارد"},{key:"resources",label:"منابع موردنیاز",type:"text",placeholder:"مثال: جوشکار، آهن‌آلات"},{key:"deadline",label:"مهلت انجام",type:"date"},{key:"responsible",label:"مسئول انجام",type:"text",placeholder:"نام و سمت"}],value:e.requiredActions,onChange:e=>x("requiredActions",e)})}),(0,a.jsx)(n.h,{title:"تأییدات",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(o.o,{label:"تأیید مسئول/مسئولین انجام",value:e.responsibleApproval,onChange:e=>x("responsibleApproval",e)}),(0,a.jsx)(o.o,{label:"تأیید مدیر پروژه/سرپرست کارگاه/سرپرست HSE",value:e.managerApproval,onChange:e=>x("managerApproval",e)})]})}),(0,a.jsx)(n.h,{title:"مستندات متاثر از تغییر",children:(0,a.jsx)(p.$,{label:"مستندات متاثر از تغییر",columns:[{key:"title",label:"عنوان سند",type:"text"},{key:"code",label:"کد سند",type:"text"}],value:e.affectedDocuments,onChange:e=>x("affectedDocuments",e)})}),(0,a.jsx)(n.h,{title:"گزارش انجام اقدامات (مرتبه اول)",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(c.E,{label:"وضعیت اقدامات",options:s,required:!0,value:e.firstReportStatus,onChange:e=>x("firstReportStatus",e)}),"not_approved"===e.firstReportStatus&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(i.W,{label:"تاریخ توافق‌شده مجدد",value:e.firstReportDate,onChange:e=>x("firstReportDate",e)}),(0,a.jsx)(u.g,{label:"شرح اقدامات توافق‌شده مجدد",value:e.firstReportDescription,onChange:e=>x("firstReportDescription",e)})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsx)(o.o,{label:"امضای مسئول انجام",value:e.firstReportResponsibleSignature,onChange:e=>x("firstReportResponsibleSignature",e)}),(0,a.jsx)(i.W,{label:"تاریخ",value:e.firstReportDate,onChange:e=>x("firstReportDate",e)}),(0,a.jsx)(o.o,{label:"امضای تایید کننده",value:e.firstReportApproverSignature,onChange:e=>x("firstReportApproverSignature",e)})]})]})}),(0,a.jsx)(n.h,{title:"گزارش دوم (در صورت نیاز)",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(c.E,{label:"وضعیت اقدامات",options:s,value:e.secondReportStatus,onChange:e=>x("secondReportStatus",e)}),"not_approved"===e.secondReportStatus&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(i.W,{label:"تاریخ توافق‌شده مجدد",value:e.secondReportDate,onChange:e=>x("secondReportDate",e)}),(0,a.jsx)(u.g,{label:"شرح اقدامات توافق‌شده مجدد",value:e.secondReportDescription,onChange:e=>x("secondReportDescription",e)})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsx)(o.o,{label:"امضای مسئول انجام",value:e.secondReportResponsibleSignature,onChange:e=>x("secondReportResponsibleSignature",e)}),(0,a.jsx)(i.W,{label:"تاریخ",value:e.secondReportDate,onChange:e=>x("secondReportDate",e)}),(0,a.jsx)(o.o,{label:"امضای تایید کننده",value:e.secondReportApproverSignature,onChange:e=>x("secondReportApproverSignature",e)})]})]})}),(0,a.jsx)(n.h,{title:"بررسی اثربخشی",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(i.W,{label:"تاریخ بررسی",value:e.effectivenessDate,onChange:e=>x("effectivenessDate",e)}),(0,a.jsx)(o.o,{label:"نحوه بررسی",value:e.effectivenessMethod,onChange:e=>x("effectivenessMethod",e)})]}),(0,a.jsx)(c.E,{label:"وضعیت اثربخشی",options:[{value:"effective",label:"اثربخش هستند"},{value:"not_effective",label:"اثربخش نیستند"}],required:!0,value:e.effectivenessStatus,onChange:e=>x("effectivenessStatus",e)}),"not_effective"===e.effectivenessStatus&&(0,a.jsx)(o.o,{label:"شماره اقدام جدید",value:e.newActionNumber,onChange:e=>x("newActionNumber",e)}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsx)(o.o,{label:"نام بررسی‌کننده",value:e.effectivenessReviewer,onChange:e=>x("effectivenessReviewer",e)}),(0,a.jsx)(i.W,{label:"تاریخ",value:e.effectivenessDate,onChange:e=>x("effectivenessDate",e)}),(0,a.jsx)(o.o,{label:"امضاء",value:e.effectivenessSignature,onChange:e=>x("effectivenessSignature",e)})]})]})})]})}},7061:function(e,t,s){"use strict";s.d(t,{E:function(){return r}});var a=s(7437);s(2265);let r=e=>{let{label:t,options:s,required:r=!1,value:l="",onChange:n,helper:o,className:i=""}=e;return(0,a.jsxs)("div",{className:"space-y-3 ".concat(i),children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-text",children:[t,r&&(0,a.jsx)("span",{className:"text-danger mr-1",children:"*"})]}),(0,a.jsx)("div",{className:"space-y-2",children:s.map(e=>(0,a.jsxs)("label",{className:"flex items-center space-x-3 space-x-reverse cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",name:t,value:e.value,checked:l===e.value,onChange:e=>null==n?void 0:n(e.target.value),className:"h-4 w-4 text-accent border-border focus:ring-focus",required:r}),(0,a.jsx)("span",{className:"text-sm text-text",children:e.label})]},e.value))}),o&&(0,a.jsx)("p",{className:"text-xs text-muted",children:o})]})}},3544:function(e,t,s){"use strict";s.d(t,{$:function(){return o}});var a=s(7437),r=s(2265);let l=r.forwardRef(function({title:e,titleId:t,...s},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))});var n=s(7227);let o=e=>{let{label:t,columns:s,value:r=[],onChange:o,helper:i,className:c=""}=e,d=e=>{let t=r.filter((t,s)=>s!==e);null==o||o(t)},u=(e,t,s)=>{let a=[...r];a[e]={...a[e],[t]:s},null==o||o(a)};return(0,a.jsxs)("div",{className:"space-y-4 ".concat(c),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-text",children:t}),(0,a.jsxs)("button",{type:"button",onClick:()=>{let e={};s.forEach(t=>{e[t.key]=(t.type,"")}),null==o||o([...r,e])},className:"btn-secondary flex items-center space-x-2 space-x-reverse text-sm",children:[(0,a.jsx)(l,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"افزودن ردیف"})]})]}),r.length>0&&(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full border border-border rounded-xl",children:[(0,a.jsx)("thead",{className:"bg-divider",children:(0,a.jsxs)("tr",{children:[s.map(e=>(0,a.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium text-text border-l border-border last:border-l-0",children:e.label},e.key)),(0,a.jsx)("th",{className:"px-4 py-3 text-center text-sm font-medium text-text border-l border-border",children:"عملیات"})]})}),(0,a.jsx)("tbody",{children:r.map((e,t)=>(0,a.jsxs)("tr",{className:"border-t border-border",children:[s.map(s=>(0,a.jsx)("td",{className:"px-4 py-3 border-l border-border last:border-l-0",children:"date"===s.type?(0,a.jsx)("input",{type:"date",value:e[s.key]||"",onChange:e=>u(t,s.key,e.target.value),className:"form-control w-full text-sm"}):"number"===s.type?(0,a.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:e[s.key]||"",onChange:e=>{let a=e.target.value;""!==a&&isNaN(Number(a))||u(t,s.key,a)},placeholder:s.placeholder,className:"form-control w-full text-sm"}):(0,a.jsx)("input",{type:"text",value:e[s.key]||"",onChange:e=>u(t,s.key,e.target.value),placeholder:s.placeholder,className:"form-control w-full text-sm"})},s.key)),(0,a.jsx)("td",{className:"px-4 py-3 text-center border-l border-border",children:(0,a.jsx)("button",{type:"button",onClick:()=>d(t),className:"text-danger hover:text-red-700 p-1",children:(0,a.jsx)(n.Z,{className:"h-4 w-4"})})})]},t))})]})}),0===r.length&&(0,a.jsx)("div",{className:"text-center py-8 text-muted",children:(0,a.jsx)("p",{children:'هیچ ردیفی اضافه نشده است. برای شروع روی "افزودن ردیف" کلیک کنید.'})}),i&&(0,a.jsx)("p",{className:"text-xs text-muted",children:i})]})}},5753:function(e,t,s){"use strict";s.d(t,{g:function(){return r}});var a=s(7437);s(2265);let r=e=>{let{label:t,placeholder:s,required:r=!1,value:l="",onChange:n,rows:o=4,helper:i,className:c=""}=e;return(0,a.jsxs)("div",{className:"space-y-2 ".concat(c),children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-text",children:[t,r&&(0,a.jsx)("span",{className:"text-danger mr-1",children:"*"})]}),(0,a.jsx)("textarea",{value:l,onChange:e=>null==n?void 0:n(e.target.value),placeholder:s,rows:o,className:"form-control w-full resize-none",required:r}),i&&(0,a.jsx)("p",{className:"text-xs text-muted",children:i})]})}}},function(e){e.O(0,[250,81,971,938,744],function(){return e(e.s=20)}),_N_E=e.O()}]);